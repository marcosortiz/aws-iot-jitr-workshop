<br />
<p align="center">
  <img width="500" src="assets/icon.png" />
</p>

# jitr-workshop
> A workshop demonstrating the use of the Universal Just-In-Time-Registration implementation.

[![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg?style=flat-square)](contributing.md)
[![CodeBuild](https://s3-us-west-2.amazonaws.com/codefactory-us-west-2-prod-default-build-badges/passing.svg)](https://s3-us-west-2.amazonaws.com/codefactory-us-west-2-prod-default-build-badges/passing.svg)

Current version: **1.0.0**

Lead Maintainer: [Halim Qarroum](mailto:qarroumh@amazon.lu)

## ðŸ“‹ Table of content

 - [Installation](#-install)
 - [Pre-requisites](#-pre-requisites)
 - [Metrics](#-metrics)
 - [Description](#-description)
 - [Command-line tools](#-command-line-tools)
 - [See also](#-see-also)

## ðŸš€ Install

In order to add this block using `npm`, head to your project directory in your terminal and add it using NPM.

```bash
npm install @aws-blocks/jitr-workshop --legacy-bundling
```

The stack will be available into the `node_modules/@aws-blocks` directory.

## ðŸŽ’ Pre-requisites

A few components are required as dependencies to this workshop before using the scripts it contains :

  - A UNIX environment such as MacOS or Linux in order to execute the [Command-line tools](#command-line-tools) that are part of this workshop.
  - The [openssl](https://wiki.openssl.org/index.php/Command_Line_Utilities) command-line tools should be installed on your operating system. These tools usually are already pre-installed on most Linux distributions, and on MacOS.
  - The [AWS CLI](https://aws.amazon.com/fr/cli/) must be installed and configured with at least one account.
  - The [mosquitto_pub](https://mosquitto.org/man/mosquitto_pub-1.html) command-line tools to test your generated certificates.
  - You must have [npm](https://www.npmjs.com/get-npm) installed to install the package dependencies of the template.

## ðŸ“Š Metrics

The below metrics displays approximate values associated with deploying and using this block.

Metric | Value
------ | ------
**Type** | Workshop
**Deployment Time** | 3 minutes
**Audience** | Solutions Architects, Developers
**Workshop** | Click [here](https://aws-blocks.io/workshops/universal-just-in-time-registration/workshop.html) to access the workshop.
**Workshop Level** | 400 workshop - **Advanced**
**Workshop Duration** | 45 minutes
**Workshop Cost** | Within [free-tier](https://aws.amazon.com/iot-core/pricing/)

## ðŸ”° Description

This workshop will walk you through the deployment of the [Universal Just-In-Time Registration](https://aws-blocks.io/package.html?name=@aws-blocks/just-in-time-registration) on your account and will assist you in performing yourself the following tasks on your AWS account :

 - Creating your own custom [Root Certificate of Authority (Root CA)](https://en.wikipedia.org/wiki/Root_certificate).
 - Registering your Root CA on AWS IoT.
 - Creating devices certificates offline and connecting using those to AWS IoT and have your thing(s) automatically created in the AWS IoT registry.
 - Modifying the attributes of your device certificates to see the effects in the AWS IoT registry.
 - Monitoring your registration events at scale.

This repository contains the code associated with the workshop. In order to access the workshop page, please click [here](https://aws-blocks.io/workshops/universal-just-in-time-registration/workshop.html).

## ðŸ“Ÿ Command-line tools

This project features two command-line tool scripts in the `bin` directory that will help you create CAs and certificates :

  - [`create-and-register-ca.sh`](bin/certificate-scripts/create-and-register-ca.sh) starts the process of creating an X.509 Root Certificate of Authority and will, if you accept it, register the newly created Root CA on AWS IoT, activate it, and enable its auto registration status.
  - [`create-device-certificate.sh`](bin/certificate-scripts/create-device-certificate.sh) uses a previously created Root Certificate of Authority to sign a new device certificate which is ready to be provisionned on a device.

Read more on how to use these tools in the [`certificate-scripts`](./bin/certificate-scripts) directory.

## ðŸ‘€ See Also

 - [just-in-time-registration](https://aws-blocks.io/package.html?name=@aws-blocks/just-in-time-registration) - A universal implementation of the AWS JITR for IoT devices and AWS Greengrass.
 - [ansible-greengrass](https://aws-blocks.io/package.html?name=@aws-blocks/ansible-greengrass) - An automated device provisioning for AWS Greengrass with Ansible.
 - The [Just In Time Registration (JITR)](https://aws.amazon.com/fr/blogs/iot/just-in-time-registration-of-device-certificates-on-aws-iot/) blog post.
